(()=>{const t={debounce:(t,o=0,e=!1)=>{let n;return(...a)=>{const i=e&&!n;clearTimeout(n),n=setTimeout(()=>{n=null,e||t(...a)},o),i&&t(...a)}},throttle:function(t,o,e={}){let n,a,i,d=0;const r=()=>{d=!1===e.leading?0:(new Date).getTime(),n=null,t.apply(a,i),n||(a=i=null)};return(...s)=>{const c=(new Date).getTime();d||!1!==e.leading||(d=c);const l=o-(c-d);a=this,i=s,l<=0||l>o?(n&&(clearTimeout(n),n=null),d=c,t.apply(a,i),n||(a=i=null)):n||!1===e.trailing||(n=setTimeout(r,l))}},overflowPaddingR:{add:()=>{const t=window.innerWidth-document.body.clientWidth;if(t>0){document.body.style.paddingRight=t+"px",document.body.style.overflow="hidden";const o=document.querySelector("#page-header.nav-fixed #menus");o&&(o.style.paddingRight=t+"px")}},remove:()=>{document.body.style.paddingRight="",document.body.style.overflow="";const t=document.querySelector("#page-header.nav-fixed #menus");t&&(t.style.paddingRight="")}},snackbarShow:(t,o=!1,e=2e3)=>{const{position:n,bgLight:a,bgDark:i}=GLOBAL_CONFIG.Snackbar,d="light"===document.documentElement.getAttribute("data-theme")?a:i;Snackbar.show({text:t,backgroundColor:d,showAction:o,duration:e,pos:n,customClass:"snackbar-css"})},diffDate:(t,o=!1)=>{const e=new Date,n=new Date(t),a=(e-n)/1e3/60,i=a/60,d=i/24,r=d/30,{dateSuffix:s}=GLOBAL_CONFIG;return o?r>12?n.toISOString().slice(0,10):r>=1?`${Math.floor(r)} ${s.month}`:d>=1?`${Math.floor(d)} ${s.day}`:i>=1?`${Math.floor(i)} ${s.hour}`:a>=1?`${Math.floor(a)} ${s.min}`:s.just:Math.floor(d)},loadComment:(t,o)=>{if("IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t[0].isIntersecting&&(o(),e.disconnect())},{threshold:[0]});e.observe(t)}else o()},scrollToDest:(t,o=500)=>{const e=window.scrollY,n=document.getElementById("page-header").classList.contains("fixed");if((e>t||n)&&(t-=70),"scrollBehavior"in document.documentElement.style)return void window.scrollTo({top:t,behavior:"smooth"});const a=performance.now(),i=n=>{const d=Math.min((n-a)/o,1);window.scrollTo(0,e+(t-e)*d),d<1&&requestAnimationFrame(i)};requestAnimationFrame(i)},animateIn:(t,o)=>{t.style.display="block",t.style.animation=o},animateOut:(t,o)=>{const e=()=>{t.style.display="",t.style.animation="",t.removeEventListener("animationend",e)};t.addEventListener("animationend",e),t.style.animation=o},wrap:(t,o,e)=>{const n=document.createElement(o);for(const[t,o]of Object.entries(e))n.setAttribute(t,o);t.parentNode.insertBefore(n,t),n.appendChild(t)},isHidden:t=>0===t.offsetHeight&&0===t.offsetWidth,getEleTop:t=>{let o=t.offsetTop,e=t.offsetParent;for(;null!==e;)o+=e.offsetTop,e=e.offsetParent;return o},loadLightbox:t=>{const o=GLOBAL_CONFIG.lightbox;if("medium_zoom"!==o){if("fancybox"===o&&(Array.from(t).forEach(t=>{if("A"!==t.parentNode.tagName){const o=t.dataset.lazySrc||t.src;btf.wrap(t,"a",{href:o,"data-fancybox":"gallery","data-caption":t.title||t.alt||"","data-thumb":o})}}),!window.fancyboxRun)){let t="";t=Fancybox.version<"6"?{Hash:!1,Thumbs:{showOnStart:!1},Images:{Panzoom:{maxScale:4}},Carousel:{transition:"slide"},Toolbar:{display:{left:["infobar"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY"],right:["slideshow","thumbs","close"]}}}:{Hash:!1,Carousel:{transition:"slide",Thumbs:{showOnStart:!1},Toolbar:{display:{left:["counter"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY","reset"],right:["autoplay","thumbs","close"]}},Zoomable:{Panzoom:{maxScale:4}}}},Fancybox.bind("[data-fancybox]",t),window.fancyboxRun=!0}}else mediumZoom(t,{background:"var(--zoom-bg)"})},setLoading:{add:t=>{t.insertAdjacentHTML("afterend",'\n        <div class="loading-container">\n          <div class="loading-item">\n            <div></div><div></div><div></div><div></div><div></div>\n          </div>\n        </div>\n      ')},remove:t=>{t.nextElementSibling.remove()}},updateAnchor:t=>{if(t!==window.location.hash){t||(t=location.pathname);const o=GLOBAL_CONFIG_SITE.title;window.history.replaceState({url:location.href,title:o},o,t)}},getScrollPercent:(()=>{let t,o,e,n;return(a,i)=>{t&&i.clientHeight===t||(t=i.clientHeight,o=window.innerHeight,e=i.offsetTop,n=Math.max(t-o,document.documentElement.scrollHeight-o));return Math.max(0,Math.min(100,Math.round(100*((a-e)/n))))}})(),addEventListenerPjax:(t,o,e,n=!1)=>{t.addEventListener(o,e,n),btf.addGlobalFn("pjaxSendOnce",()=>{t.removeEventListener(o,e,n)})},removeGlobalFnEvent:(t,o=window)=>{const e=o.globalFn||{},n=e[t];n&&(Object.keys(n).forEach(t=>n[t]()),delete e[t])},switchComments:(t=document,o)=>{const e=t.querySelector("#switch-btn");if(!e)return;let n=!1;const a=t.querySelector("#post-comment");btf.addEventListenerPjax(e,"click",()=>{a.classList.toggle("move"),n||"function"!=typeof loadOtherComment||(n=!0,loadOtherComment(t,o))})}};window.btf={...window.btf,...t}})();