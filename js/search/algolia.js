window.addEventListener("load",()=>{const{algolia:i}=GLOBAL_CONFIG,{appId:a,apiKey:t,indexName:n,hitsPerPage:e=5,languages:s}=i;if(!a||!t||!n)return;const o=document.getElementById("search-mask"),l=document.querySelector("#algolia-search .search-dialog"),c=i=>{const a=i?"animateIn":"animateOut",t=i?"titleScale 0.5s":"search_close .5s";btf[a](o,i?"to_show 0.5s":"to_hide 0.5s"),btf[a](l,t)},r=()=>{window.innerWidth<768&&l.style.setProperty("--search-height",window.innerHeight+"px")},g=()=>{btf.overflowPaddingR.add(),c(!0),P(!1),setTimeout(()=>{const i=document.querySelector("#algolia-search-input .ais-SearchBox-input");i&&i.focus()},100);const i=a=>{"Escape"===a.code&&(u(),document.removeEventListener("keydown",i))};document.addEventListener("keydown",i),r(),window.addEventListener("resize",r)},u=()=>{btf.overflowPaddingR.remove(),c(!1),window.removeEventListener("resize",r)},f=()=>{btf.addEventListenerPjax(document.querySelector("#search-button > .search"),"click",g)},h=i=>{if(!i)return"";let a="";if("string"==typeof i)a=i.trim();else if("object"==typeof i)if(void 0!==i.value){if(a=(i.value+"").trim(),!a)return""}else{if(i.matchedWords||i.matchLevel||void 0!==i.fullyHighlighted)return"";try{if(a=JSON.stringify(i).trim(),"{}"===a||"[]"===a||'""'===a)return""}catch(i){return""}}else{if(!i.toString||"function"!=typeof i.toString)return"";if(a=(""+i).trim(),"[object Object]"===a||"[object Array]"===a)return""}const t=a.indexOf("<mark>");let n=t-30,e=t+120,s="",o="";n<=0?(n=0,e=140):s="...",e>a.length?e=a.length:o="...";let l=a.substring(n,e);const c=l.indexOf(">"),r=l.indexOf("<");-1!==c&&(-1===r||c<r)&&(l=l.substring(c+1));const g=l.lastIndexOf("<"),u=l.lastIndexOf(">");-1!==g&&g>u&&(l=l.substring(0,g));const f=[];let h="",p=0;for(;p<l.length;){if("<"===l[p])if("/"===l[p+1]){const i=l.indexOf(">",p);if(-1!==i){const a=l.substring(p+2,i);for(let i=f.length-1;i>=0;i--)if(f[i]===a){f.splice(i,1);break}h+=l.substring(p,i+1),p=i+1;continue}}else if("<!"===l.substr(p,2)||-1!==l.indexOf("/>",p)&&l.indexOf("/>",p)<l.indexOf(">",p)){const i=l.indexOf(">",p);if(-1!==i){h+=l.substring(p,i+1),p=i+1;continue}}else{const i=l.indexOf(">",p);if(-1!==i){const a=l.substring(p+1,l.indexOf(" ",p)>-1&&l.indexOf(" ",p)<i?l.indexOf(" ",p):i).split(/\s/)[0];f.push(a),h+=l.substring(p,i+1),p=i+1;continue}}h+=l[p],p++}for(;f.length>0;){h+=`</${f.pop()}>`}if(n>0||s){const i=a.indexOf("<",n>0?n-30:0),t=a.indexOf("<mark>",n>0?n-30:0);-1!==i&&(-1===t||i<t)&&(s="...")}return l=h,`${s}${l}${o}`},p=i=>i?"string"==typeof i?i.trim():"object"==typeof i&&void 0!==i.value?(i.value+"").trim():"":"";let d;if(window["algoliasearch/lite"]&&"function"==typeof window["algoliasearch/lite"].liteClient)d=window["algoliasearch/lite"].liteClient(a,t);else{if("function"!=typeof window.algoliasearch)return;d=window.algoliasearch(a,t)}if(!d)return;let m="";const P=i=>{const a=document.getElementById("loading-status");a&&(a.hidden=!i)},w={get searchInput(){return document.querySelector("#algolia-search-input .ais-SearchBox-input")},get hits(){return document.getElementById("algolia-hits")},get hitsEmpty(){return document.getElementById("algolia-hits-empty")},get hitsList(){return document.querySelector("#algolia-hits .ais-Hits-list")},get hitsWrapper(){return document.querySelector("#algolia-hits .ais-Hits")},get pagination(){return document.getElementById("algolia-pagination")},get paginationList(){return document.querySelector("#algolia-pagination .ais-Pagination-list")},get stats(){return document.querySelector("#algolia-info .ais-Stats-text")}},b=i=>{w.pagination.style.display=i?"":"none",w.stats.style.display=i?"":"none"},k=(i,a,t=0)=>{if(0===i.length&&a)return w.hitsEmpty.textContent=s.hits_empty.replace(/\$\{query}/,a),w.hitsEmpty.style.display="",w.hitsWrapper.style.display="none",void(w.stats.style.display="none");w.hitsEmpty.style.display="none";const n=i.map((i,a)=>{const n=t*e+a+1,s=i.permalink||GLOBAL_CONFIG.root+i.path,o=i.i||i;let l="";try{o.contentStripTruncate?l=h(o.contentStripTruncate):o.contentStrip?l=h(o.contentStrip):o.content?l=h(o.content):i.contentStripTruncate?l=h(i.contentStripTruncate):i.contentStrip?l=h(i.contentStrip):i.content&&(l=h(i.content))}catch(i){l=""}let c="no-title";try{o.title?c=p(o.title)||"no-title":i.title&&(c=p(i.title)||"no-title"),c&&"no-title"!==c||(c="string"==typeof i.title&&i.title.trim()?i.title.trim():i.title&&"object"==typeof i.title&&i.title.value&&(i.title.value+"").trim()||"no-title")}catch(i){c="no-title"}return`\n        <li class="ais-Hits-item" value="${n}">\n          <a href="${s}" class="algolia-hit-item-link">\n            <span class="algolia-hits-item-title">${c}</span>\n            ${l?`<div class="algolia-hit-item-content">${l}</div>`:""}\n          </a>\n        </li>`}).join("");w.hitsList.innerHTML=n,w.hitsWrapper.style.display=a?"":"none",i.length>0&&(w.stats.style.display="")},$=(i,a)=>{if(a<=1)return w.pagination.style.display="none",void(w.paginationList.innerHTML="");w.pagination.style.display="block";const t=0===i,n=i===a-1,e=window.innerWidth<768?3:5;let s=Math.max(0,i-Math.floor(e/2));const o=Math.min(a-1,s+e-1);o-s+1<e&&(s=Math.max(0,o-e+1));let l="";a>e&&s>0&&(l+='\n        <li class="ais-Pagination-item ais-Pagination-item--page">\n          <a class="ais-Pagination-link" aria-label="Page 1" href="#" data-page="0">1</a>\n        </li>',s>1&&(l+='\n          <li class="ais-Pagination-item ais-Pagination-item--ellipsis">\n            <span class="ais-Pagination-link">...</span>\n          </li>'));for(let a=s;a<=o;a++){l+=a===i?`\n          <li class="ais-Pagination-item ais-Pagination-item--page ais-Pagination-item--selected">\n            <span class="ais-Pagination-link" aria-label="Page ${a+1}">${a+1}</span>\n          </li>`:`\n          <li class="ais-Pagination-item ais-Pagination-item--page">\n            <a class="ais-Pagination-link" aria-label="Page ${a+1}" href="#" data-page="${a}">${a+1}</a>\n          </li>`}a>e&&o<a-1&&(o<a-2&&(l+='\n          <li class="ais-Pagination-item ais-Pagination-item--ellipsis">\n            <span class="ais-Pagination-link">...</span>\n          </li>'),l+=`\n        <li class="ais-Pagination-item ais-Pagination-item--page">\n          <a class="ais-Pagination-link" aria-label="Page ${a}" href="#" data-page="${a-1}">${a}</a>\n        </li>`),a>1?(w.paginationList.innerHTML=`\n            <li class="ais-Pagination-item ais-Pagination-item--previousPage ${t?"ais-Pagination-item--disabled":""}">\n              ${t?'<span class="ais-Pagination-link ais-Pagination-link--disabled" aria-label="Previous Page"><i class="fas fa-angle-left"></i></span>':`<a class="ais-Pagination-link" aria-label="Previous Page" href="#" data-page="${i-1}"><i class="fas fa-angle-left"></i></a>`}\n            </li>\n            ${l}\n            <li class="ais-Pagination-item ais-Pagination-item--nextPage ${n?"ais-Pagination-item--disabled":""}">\n              ${n?'<span class="ais-Pagination-link ais-Pagination-link--disabled" aria-label="Next Page"><i class="fas fa-angle-right"></i></span>':`<a class="ais-Pagination-link" aria-label="Next Page" href="#" data-page="${i+1}"><i class="fas fa-angle-right"></i></a>`}\n            </li>`,w.pagination.style.display=m?"":"none"):w.pagination.style.display="none"},y=(i,a,t)=>{if(t){const t=s.hits_stats.replace(/\$\{hits}/,i).replace(/\$\{time}/,a);w.stats.innerHTML="<hr>"+t,w.stats.style.display=""}else w.stats.style.display="none"},v=async(i,a=0)=>{if(!i.trim())return m="",k([],"",0),$(0,0),y(0,0,""),void b(!1);P(!0),m=i;try{let t;if(d&&"function"==typeof d.search){t=(await d.search([{indexName:n,query:i,params:{page:a,hitsPerPage:e,highlightPreTag:"<mark>",highlightPostTag:"</mark>",attributesToHighlight:["title","content","contentStrip","contentStripTruncate"]}}])).results[0]}else{if(!d||"function"!=typeof d.initIndex)throw Error("Algolia: No compatible search method available");{const s=d.initIndex(n);t=await s.search(i,{page:a,hitsPerPage:e,highlightPreTag:"<mark>",highlightPostTag:"</mark>",attributesToHighlight:["title","content","contentStrip","contentStripTruncate"]})}}k(t.hits||[],i,a);$(a,t.nbHits<=e?1:t.nbPages||0),y(t.nbHits||0,t.processingTimeMS||0,i);b(t.hits&&t.hits.length>0),window.pjax&&window.pjax.refresh(document.getElementById("algolia-hits"))}catch(t){k([],i,a),$(0,0),y(0,0,i)}finally{P(!1)}};let x;(()=>{P(!1),w.searchInput&&w.searchInput.addEventListener("input",i=>{((i,a=300)=>{clearTimeout(x),x=setTimeout(()=>v(i),a)})(i.target.value)});const i=document.querySelector("#algolia-search-input .ais-SearchBox-form");i&&i.addEventListener("submit",i=>{i.preventDefault();v(w.searchInput.value)}),w.pagination.addEventListener("click",i=>{i.preventDefault();const a=i.target.closest("a[data-page]");if(a){const i=parseInt(a.dataset.page,10);!isNaN(i)&&m&&v(m,i)}}),b(!1)})(),f(),o.addEventListener("click",u),document.querySelector("#algolia-search .search-close-button").addEventListener("click",u),window.addEventListener("pjax:complete",()=>{btf.isHidden(o)||u(),f()})});